{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "oneOf": [
    {
      "$ref": "#/$defs/Model"
    }
  ],
  "$defs": {
    "Augmentation": {
      "description": "An augmentation to Dart code. TODO(davidmorgan): this is a placeholder.",
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "description": "Augmentation code."
        }
      }
    },
    "DynamicTypeDesc": {
      "description": "The type-hierarchy representation of the type `dynamic`.",
      "type": "null"
    },
    "FunctionTypeDesc": {
      "description": "A static type representation for function types.",
      "type": "object",
      "properties": {
        "returnType": {
          "$ref": "#/$defs/StaticTypeDesc",
          "description": "The return type of this function type."
        },
        "typeParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeParameterDesc"
          },
          "description": "Static type parameters introduced by this function type."
        },
        "requiredPositionalParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeDesc"
          }
        },
        "optionalPositionalParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeDesc"
          }
        },
        "namedParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/NamedFunctionTypeParameter"
          }
        }
      }
    },
    "MetadataAnnotation": {
      "type": "object",
      "description": "A metadata annotation.",
      "properties": {
        "type": {
          "$comment": "The type of the annotation.",
          "$ref": "#/$defs/QualifiedName"
        }
      }
    },
    "Interface": {
      "type": "object",
      "description": "An interface.",
      "properties": {
        "metadataAnnotations": {
          "description": "The metadata annotations attached to this iterface.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/MetadataAnnotation"
          }
        },
        "members": {
          "type": "object",
          "description": "Map of members by name.",
          "additionalProperties": {
            "$ref": "#/$defs/Member"
          }
        },
        "thisType": {
          "description": "The type of the expression `this` when used in this interface.",
          "$ref": "#/$defs/NamedTypeDesc"
        },
        "properties": {
          "$comment": "The properties of this interface.",
          "$ref": "#/$defs/Properties"
        }
      }
    },
    "Library": {
      "description": "Library.",
      "type": "object",
      "properties": {
        "scopes": {
          "type": "object",
          "description": "Scopes by name.",
          "additionalProperties": {
            "$ref": "#/$defs/Interface"
          }
        }
      }
    },
    "Member": {
      "type": "object",
      "description": "Member of a scope.",
      "properties": {
        "properties": {
          "$comment": "The properties of this member.",
          "$ref": "#/$defs/Properties"
        }
      }
    },
    "Model": {
      "type": "object",
      "description": "Partial model of a corpus of Dart source code.",
      "properties": {
        "uris": {
          "type": "object",
          "description": "Libraries by URI.",
          "additionalProperties": {
            "$ref": "#/$defs/Library"
          }
        },
        "types": {
          "description": "The resolved static type hierarchy.",
          "$ref": "#/$defs/TypeHierarchy"
        }
      }
    },
    "NamedFunctionTypeParameter": {
      "type": "object",
      "description": "A resolved named parameter as part of a [FunctionType].",
      "properties": {
        "name": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        },
        "type": {
          "$ref": "#/$defs/StaticTypeDesc"
        }
      }
    },
    "NamedRecordField": {
      "type": "object",
      "description": "A named field in a [RecordType] definition, consisting of the field name and the associated type.",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "$ref": "#/$defs/StaticTypeDesc"
        }
      }
    },
    "NamedTypeDesc": {
      "type": "object",
      "description": "A resolved static type",
      "properties": {
        "name": {
          "$ref": "#/$defs/QualifiedName"
        },
        "typeParameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeParameterDesc"
          }
        },
        "instantiation": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeDesc"
          }
        }
      }
    },
    "NeverTypeDesc": {
      "type": "null",
      "description": "Representation of the bottom type [Never]."
    },
    "NullableTypeDesc": {
      "type": "object",
      "description": "A Dart type of the form `T?` for an inner type `T`.",
      "properties": {
        "inner": {
          "$ref": "#/$defs/StaticTypeDesc"
        }
      }
    },
    "Properties": {
      "type": "object",
      "description": "Set of boolean properties.",
      "properties": {
        "isAbstract": {
          "description": "Whether the entity is abstract, meaning it has no definition.",
          "type": "boolean"
        },
        "isClass": {
          "description": "Whether the entity is a class.",
          "type": "boolean"
        },
        "isGetter": {
          "description": "Whether the entity is a getter.",
          "type": "boolean"
        },
        "isField": {
          "description": "Whether the entity is a field.",
          "type": "boolean"
        },
        "isMethod": {
          "description": "Whether the entity is a method.",
          "type": "boolean"
        },
        "isStatic": {
          "description": "Whether the entity is static.",
          "type": "boolean"
        }
      }
    },
    "QualifiedName": {
      "description": "A URI combined with a name.",
      "type": "string"
    },
    "Query": {
      "type": "object",
      "description": "Query about a corpus of Dart source code. TODO(davidmorgan): this queries about a single class, expand to a union type for different types of queries.",
      "properties": {
        "target": {
          "$comment": "The class to query about.",
          "$ref": "#/$defs/QualifiedName"
        }
      }
    },
    "RecordTypeDesc": {
      "type": "object",
      "description": "A resolved record type in the type hierarchy.",
      "properties": {
        "positional": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeDesc"
          }
        },
        "named": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/NamedRecordField"
          }
        }
      }
    },
    "StaticTypeDesc": {
      "description": "A partially-resolved description of a type as it appears in Dart's type hierarchy.",
      "properties": {
        "type": {
          "type": "string"
        },
        "value": {
          "oneOf": [
            {"$ref": "#/$defs/DynamicTypeDesc"},
            {"$ref": "#/$defs/FunctionTypeDesc"},
            {"$ref": "#/$defs/NeverTypeDesc"},
            {"$ref": "#/$defs/NullableTypeDesc"},
            {"$ref": "#/$defs/NamedTypeDesc"},
            {"$ref": "#/$defs/RecordTypeDesc"},
            {"$ref": "#/$defs/TypeParameterTypeDesc"},
            {"$ref": "#/$defs/VoidTypeDesc"}
          ]
        }
      }
    },
    "StaticTypeParameterDesc": {
      "description": "A resolved type parameter introduced by a [FunctionType].",
      "type": "object",
      "properties": {
        "identifier": {
          "type": "integer"
        },
        "bound": {
          "$ref": "#/$defs/StaticTypeDesc"
        }
      }
    },
    "TypeHierarchy": {
      "description": "View of a subset of a Dart program's type hierarchy as part of a queried model.",
      "type": "object",
      "properties": {
        "named": {
          "description": "Map of qualified interface names to their resolved named type.",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/TypeHierarchyEntry"
          }
        }
      }
    },
    "TypeHierarchyEntry": {
      "description": "Entry of an interface in Dart's type hierarchy, along with supertypes.",
      "type": "object",
      "properties": {
        "typeParameters": {
          "description": "Type parameters defined on this interface-defining element..",
          "type": "array",
          "items": {
            "$ref": "#/$defs/StaticTypeParameterDesc"
          }
        },
        "self": {
          "description": "The named static type represented by this entry.",
          "$ref": "#/$defs/NamedTypeDesc"
        },
        "supertypes": {
          "description": "All direct supertypes of this type.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/NamedTypeDesc"
          }
        }
      }
    },
    "TypeParameterTypeDesc": {
      "description": "A type formed by a reference to a type parameter.",
      "type": "object",
      "properties": {
        "parameterId": {
          "type": "integer"
        }
      }
    },
    "VoidTypeDesc": {
      "description": "The type-hierarchy representation of the type `void`.",
      "type": "null"
    }
  }
}
